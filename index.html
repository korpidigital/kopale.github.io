<!DOCTYPE html>
<html>
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0Q1BXJ6GJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G0Q1BXJ6GJ');
</script>
<!-- end -->
<title>korpi.dev - My Technical Portfolio</title>
<meta name="description" content="Web, Mobile, IoT and Machine Learning projects by Tuomas Korpi">
<meta name="keywords" content="HTML, CSS, JavaScript, Kotlin, Android Studio, Java, iot, deep learning, ai, engineer
                                web desing, python, suomi, finland, korpi, tuomas">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="code.css">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="icons.css">
<link rel="stylesheet" href="responsive.css">
<link rel="stylesheet" href="projectGrid.css">
<link rel="stylesheet" href="keyframes.css">
</head>
<body>

<div class="flex-cont vertical cont">
<div class="header">korpi.dev</div>

<div class="flex-cont horizontal row-2">
<div class=" menubar " id="menubar">
    <div class="barIco" id="runico"><span class="tooltip">Run</span></div>
    <div class="barIco" id="fileico"><span class="tooltip">Projects</span></div>
    <div class="barIco" id="emailico"><span class="tooltip">Contact</span></div>
    <div class="barIco" id="linkico"><span class="tooltip">Links</span></div>
</div>
    <div class="flex-cont vertical main" id="mainId">
        
        <div class="tab">
            <div class="tab1" id="tab1">
                <div><svg id="homeico" width="35px" fill=" #D4D4D4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48px" height="48px"><path d="M 12 2.0996094 L 1 12 L 4 12 L 4 21 L 11 21 L 11 15 L 13 15 L 13 21 L 20 21 L 20 12 L 23 12 L 12 2.0996094 z M 12 4.7910156 L 18 10.191406 L 18 11 L 18 19 L 15 19 L 15 13 L 9 13 L 9 19 L 6 19 L 6 10.191406 L 12 4.7910156 z"/></svg>
                    <span class="tabtxt1">main</span>
                </div>
              </div>
              <div class="tab2" id="tab2">
                <div><svg id="smallfile" xmlns="http://www.w3.org/2000/svg" width="23.697" height="29.483" viewBox="0 0 23.697 29.483">
                    <g  transform="translate(11.378 -50.017)">
                      <path id="filePath_3" data-name="Path 3" d="M13.716,2H6.159A2.165,2.165,0,0,0,4,4.172V21.544a2.165,2.165,0,0,0,2.159,2.172H19.114a2.165,2.165,0,0,0,2.159-2.172V9.6Z" transform="translate(-13.878 54.283)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                      <rect id="filePath_4" data-name="Rectangle 1" width="16" height="22" transform="translate(-5.181 50.017)" fill="#1e1e1e"/>
                      <path id="filePath_1" data-name="Path 1" d="M12.809,2H5.958A2.034,2.034,0,0,0,4,4.1V20.924a2.034,2.034,0,0,0,1.958,2.1H17.7a2.034,2.034,0,0,0,1.958-2.1V9.359Z" transform="translate(-8.842 49.973)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                      <path id="filePath_2" data-name="Path 2" d="M13,2V9.824h6.906" transform="translate(-10.889 50.117)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                    </g>
                  </svg>
                  <span class="tabtxt2">projects</span></div>
              </div>
              <div class="tabback" id="tabback"></div>
        </div>
        
        <div class="flex-cont horizontal mobile">
            <div class="menuopen" id="menuopen">
                <div class="firsthalf">
                <div id="projectheader">
                    <div id="explorertxt">EXPLORER</div>
                    <div class="firsttitle maintitle">PROJECTS</div>
                </div>
                
                <ul class="projectlist">
                    <li id="lip1" class="project1 list listItem"><span >IoT table tennis</span></li>
                    <li id="lip2" class="project2 list listItem"><span >AI table tennis</span> </li>
                    <li id="lip3" class="project3 list listItem"><span>IoT scale for waste bins</span></li>
                    <li id="lip4" class="project4 list listItem"><span>Android dataset recorder</span></li>
                    <li id="lip5" class="project5 list listItem"><span>My website</span></li>
                    <li id="lip6" class="project6 list listItem"><span>AI Voice commands</span></li>
                    <li id="lip7" class="project7 list listItem"><span>Customer website 1</span></li>
                    <li id="lip8" class="project8 list listItem"><span>Android IoT App</span></li>
                    
                      
                </ul>
                
                </div>
                <div class="secondhalf">
                    <div class="secondtitle maintitle">CATEGORIES</div>
                    <ul class="projectlist">
                        <li id="categoryAll" class="menuCategory listItem"><span >All</span></li>
                        <li id="categoryIot" class="menuCategory listItem">IoT</li>
                        <li id="categoryMachine" class="menuCategory listItem"><span >Machine learning</span> </li>
                        <li id="categoryMobile" class="menuCategory listItem"><span >Mobile development</span></li>
                        <li id="categoryWeb" class="menuCategory listItem"><span >Web development</span></li>
                        <li id="categoryCustomer" class="menuCategory listItem"><span >Customer work</span></li>
                    </ul>
                </div>
                
            </div> 
            <div class="aside" id="aside">
                <div class="me"></div>
                <div class="flex-cont horizontal code" id="code">
                    <div class="rownum" id="rownum"></div> 
                    <div class="codetxt">
                        <div id="importxt">
                        <span class="purple">import</span>
                        <span class="lightblue">tuomas</span>
                        <span class="purple">from</span>
                        <span class="brown">'./developers'</span>;
                        </div>
                        <div id="commenttxt">
                        <span class="green">// Tuomas Korpi <br>
                            // Developer, Designer, Engineer</span>
                        </div>
                        <div id="functiontxt">
                        <span class="blue">function</span>
                        <span class="yellow">introduction<span class="orange">(){
                        </span></span>
                        </div>
                        <div id="functiontxt2">
                        <span class="blue">let</span>
                        <span class="lightblue">dev = {</span>
                        <div id="functiontxt3">
                            <span class="lightblue">name: </span>
                            <span class="brown">"Tuomas Korpi"</span><br>
                            <span class="lightblue">age: </span>
                            <span class="brown">"29"</span><br>
                            <span class="lightblue">country: </span>
                            <span class="brown">"Finland"</span><br>
                            <span class="lightblue">city: </span>
                            <span class="brown">"Kuopio"</span><br>
                        </div>
                        <span class="lightblue">}</span>;
                        <div id="functiontxt4">
                            <span class="nospace"><span class="lightblue">console</span>.
                            <span class="yellow">log</span>
                            <span class="purple">(</span></span>
                            <span class="brown">`Hello World! I am</span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.name</span>
                            <span class="blue">}</span></span>
                            <span class="brown"> \</span><br>
                            <span class="brown">from </span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.city</span>
                            <span class="blue">}</span>
                            <span class="brown">,</span></span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.country</span>
                            <span class="blue">}</span>
                            <span class="brown">.`</span>
                            <span class="purple">)</span></span>;
                        </div>
                        </div>
                        <div id="functiontxt5">
                        <span class="orange">}</span>
                        </div>
                    <div id="functiontxt6">
                        <span class="nospace"><span class="yellow">introduction</span>
                        <span class="orange">()</span>;<br>
                        <span class="lightblue">tuomas</span>.
                        <span class="yellow">webpage</span>
                        <span class="orange">()</span>;</span>
                    </div>
                    <div id="contacttxt">
                        <p class="green">/*</p>
                        <p class="green">Can I do something for you? Contact me at:</p>
                        <p class="green">tuomas.av.korpi@gmail.com</p>
                        <p class="green">*/</p>
                    </div>
                </div>
        </div>
        
        <div class="output" id="output">
            <div class="outputbox" id="outputbox">
                <div id="outputtxt"><span class="outtitle">CONSOLE</span><br><br><div class="flex-cont horizontal">Click top left arrow (<div class="smallrun"></div>) to run the code! </div></div>
            </div>
        </div>
    </div>
    <div class="asideProject" id="asideProject">
        <div class="projectContainer">
            <div id="p1" class="project project1 box categoryIot">
                <div class="minimize"></div>
                IOT TABLE TENNIS
                <div class="projectPage">
                    <p>This is version 2. Documentation of version 1 of this project is available here: 
                        <a href="https://www.researchgate.net/publication/338683456_Use_of_an_IoT_Technology_to_Analyse_the_Inertial_Measurement_of_Smart_Ping-pong_Paddle
                        ">Research Gate Link</a>
                
                   <p><iframe class="projectImg" width="70%" height="415" src="https://www.youtube.com/embed/t19XiV-uCdM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                    <p>
                    </p>
                     <h1>1 introduction</h1>
                    </p>    
                        This research and development is continuation from previous school project “Smart ping pong paddle, Orientation measurement of game equipment”. In that first version the theory was there but final product lacked desired functionality regarding stable orientation and paddle angles.
                        In the second version those basic problems are taken care of by changing the inertial measure-ment unit (IMU) and some additional features are researched like ball hit detection, paddle posi-tion measurement and ball tracking with machine learning. 
                    </p>
                    <p>
                        Overall system block diagram is still the same so only the parts that are changed are covered more carefully. Report is structured so that each feature is covered one by one. Paddle position measurement is addressed in “Related works” where possibilities of IMU’s 3D position tracking capabilities are researched. Followed by “Orientation measurement” where we cover the new IMU sensor, theory of rotation in three dimensions and implementation both in MCU’s Arduino code and Unity’s C# code. Orientation and paddle angle measurement are on the main focus here, but after that comes “Hit detection” where the use of piezo tap sensor is considered.
                    </p>
                    <h1>2 Related works</h1>
                    <p>
                        In his thesis “Position Estimation Using an InertialMeasurement Unit Without TrackingSystem” Johnny Leporcq from Aalto university tries to estimate accurate position of an IMU sensor com-posed of accelerometer, gyroscope and magnetometer without any additional tracking system or expensive calibration equipment. Usually GPS is used in pair with IMU to correct position drifting.
                        Precise calibration of each sensor plays crucial part in sensor fusion position estimation and Ex-tended Kalman Filter and Particle swarm optimization algorithms are used for that. To get position velocity is needed and it is obtained by integration of acceleration with respect to time and then again by integrating velocity with respect to time position is calculated. After testing this in prac-tice author concludes that is hardly possible to get reliable position estimation without external tracking system because any small noise or bias or mismatch between accelerometer and gravity signal will cause huge errors after the double integration process. 

                    </p>
                    <p>
                        Due to limitations expressed in the thesis, three dimensional position tracking does not seem via-ble option for Smart ping pong paddle project. Adding external GPS sensor to the system is not good idea either since adding more hardware would affect the playability of the game itself. 
                    </p>
                    <h1>3 Orientation measurement</h1>
                    <h2>3.1	Euler angles and quaternions</h2>
                    <p>
                        Euler angles store orientation using three angles. These three angles correspond to three object space-axis: Yaw and pitch define which way object is facing, yaw being the horizontal circle and pitch being the vertical circle. Roll measures the amount of twist. There are some disadvantages with Euler angles when defining full 360-degree rotation in every axis, because the three angles are not completely independent from each other so the representation for given orientation is not unique and interpolating between two orientations is problematic. For that reason, in this project Euler angles are only used to show the angle on the screen since they are easy to understand by humans. Actual object orientation is defined by quaternions.
                    </p>
                    <p>
                        Quaternions avoid problems seen in Euler angles by using four numbers to express an orienta-tion. Quaternion can be described as 4D complex number that expresses angular displacement by using an axis of rotation and an amount of rotation on that axis and consist of scalar and vector components. Unity has functions to define quaternion based on the four values between 0 to 1 (or -1) from the orientation sensor and to transform object based on that. 
                    </p>
                    <h2>3.2 Adafruit BNO055 absolute orientation sensor</h2>
                    <p>In the previous version with MPU6050 IMU sensor the sensor fusion and accurate calibration cal-culations turned out to error sensitive and challenging task, so when BNO055 9-DOF Absolute Orientation IMU Fusion Breakout Board does all those calculation on board with the help of ARM Cortex-M0 based processor, it is obvious choice for this project since the size is still small enough. </p>
                    <p>Like MPU6050 sensor, BNO055 transfers data between transmitter MCU (Wemos D1 mini) via I2C connection. BNO055’s power 3.3-5.0V, ground, SDA, and SCL are connected to corresponding GPIOs.</p>
                    <p>Calibration is done on in the board every time it is powered on. Gyroscope, accelerometer and magnetometer all need valid calibration data that is gathered by moving the sensor to different positions. A “calibration dance” is required to get the sensor fully calibrated and it takes under a minute. Full (3) calibration value for gyroscope is achieved when sensor is still in any position. Magnetometer may need figure 8 motion in three dimensions to be fully calibrated. Accelerometer is most time consuming one since the sensor needs to be placed in six standing positions, one per side/face. </p>
                    <h2>3.3 Arduino IDE </h2>
                    <p>Compared to earlier Arduino IDE code this one is more simple, since Adafruit sensor and BNO055 libraries make obtaining pre-processed orientation data and calibration state values easy. For ex-ample, next short code snippet is all you need to get one of four needed quaternion values:</p>
                    <p><i>bno.begin();<br>
                        imu::Quaternion quat = bno.getQuat();<br>
                        String sensorValue = String(quat.w(), 2);
                        </i></p>
                    <p>Rest of the Arduino code concerning vibration motor and data transformation via WLAN are pretty much the same with the earlier version. There are two Arduino scripts “transmitter.ino” and “re-ceiver.ino” for each MCU.</p>
                    <h2>3.4 Unity game engine</h2>
                    <p>The “motion2.cs” script handles object rotation in Unity. First it reads data array that receiver MCU wrote to the serial port. It splits array to quaternion and calibration values. Quaternions need to be normalized because floating-point precession errors will cause it to not be unit length. So next in the code normalization is done: </p>
                    <p><i>float factor = Mathf.Sqrt(Mathf.Pow(x, 2f) + Mathf.Pow(y, 2f) + Mathf.Pow(z, 2f) + Mathf.Pow(w, 2f));<br>
                        xNorm = x / factor;<br>
                        yNorm = y / factor;<br>
                        zNorm = z / factor;<br>
                        wNorm = w / factor;
                     </i></p>
                     <p>	Unity engine has method to create rotation quaternion and transform object function with that:</p>
                    <p><i>Quaternion quat = new Quaternion(xNorm, zNorm, yNorm, wNorm);<br>
                        transform.rotation = Quaternion(quat);
                    </i></p>
                    <p>Other unity scripts included do following things: Get quaternion, calibration and angle values on the screen, make it possible to select available COM-port from dropdown menu, and rotate camera manually with arrow keys. That camera rotation is for last adjustment after the calibration to get the view just right. </p>
                    <p>There are also some scripts for hit detection, that I go over briefly since the concept was aban-doned from the last prototype.</p>
                    <h1>4 Hit detection</h1>
                    <p>Hit detection was an idea to connect piezo disc sensor to the setup and put the sensor on the paddle to make pop-up text indicator appear on the screen when ball hits. Piezoelectric effect measures the electrical potential caused by mechanical force like ball hitting the paddle, where it is easily read with MCU’s analog read pin. Pull down resistor needs to be added between sensor and analog pin. Bigger the resistor more sensitive it is to the hits. Thresh hold was added in Ar-duino code to pick up right amount of force. </p>
                    <p>Concept gave good results when piezo sensor was only sensor connected to the MCU. But when piezo sensor and orientation sensor were both connected to Wemos D1 mini MCU both sensors started behaving unreliably. MCU might not be able to deliver needed amount of power to sensors at the same time. To keep orientation reliable, hit detection idea was scrapped. Adding more sen-sors to the setup is not good idea anyways since machine learning may be able to gather that in-formation and more.</p>
                    <h1>5 RESULTS AND CONCLUSION</h1>
                    <p>With new orientation sensor set goal of stable object rotation and angle information was success-ful and new avenues for IoT in table tennis was researched. Machine learning and computer vi-sion seems to be a potential direction for information gathering in sports in general. </p>
                    <p>Here is explanation how Smart Ping Pong Paddle v2 operates: </p>
                    <ul>
                        <li>1.	Connect receiver to PC’s USB</li>
                        <li>2.	Open Unity Application</li>
                        <li>3.	Select COM-port where receiver is connected</li>
                        <li>4.	Switch power on the paddle</li>
                        <li>5.	Vibration motor indicates when paddle MCU has WLAN connection with receiver MCU</li>
                        <li>6.	Calibrate by moving the paddle around</li>
                        <li>7.	Adjust camera with arrow keys if needed</li>
                        <li>8.	Play with it</li>
                    
                    </ul>
                    <h1>6 References</h1>
                    <p>Bno055 sensor:
                        https://learn.adafruit.com/adafruit-bno055-absolute-orientation-sensor
                        </p>
                    <p>Johnny Leporcq, Position Estimation Using an InertialMeasurement Unit Without TrackingSystem:
                        
                    <a href="https://aaltodoc.aalto.fi/bitstream/handle/123456789/32426/master_Leporcq_Johnny_2018.pdf?sequence=1&isAllowed=y">link</a>
                        </p>
                    <p>Book for orientation theory:
                        3D math primer for graphics and game development by Dunn and Parberry, 2011 Taylor and Fran-cis Group, LLC
                        </p>
                    <p>Piezo disc video:
                        https://www.youtube.com/watch?v=sqHJ9tDC9IM
                        </p>
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#IoT</div>
            </div>
            <div id="p2" class="project project2 box categoryMachine">
                <div class="minimize"></div>
                AI TABLE TENNIS
                <div class="projectPage">
                    <p>
                        Utilizing deep learning, more specifically computer vision object detection and tracking is the next logical direction for this project as it does not demand modification of a gaming equipment or af-fect the gameplay in any way. 
                    </p>
                    <p>
                    Development paths for such computer vision AI could be ball speed estimation, ball trajectory path estimation, and collection of all kinds of statistics about the game like times each player hit the ball to the net or over the table.
                    </p>
                    <p>
                    Many of those features are built on the detection of the ball from the video so model was trained using “You only look once” (YOLO) real-time object detection system. Custom dataset was made by taking 200 frames out of 3 different ITTF table tennis videos and labeling ball from each frame. Model training was done following the steps from Youtube video “YOLOv3 in the CLOUD: Install and Train Custom Object Detector” by The AI Guy, so the details are not repeated here. 
                    </p>
                    <p>
                    Model was able to detect the ball with high enough accuracy for all the other features to be pos-sible in theory. This was not yet deep dive into the deep learning but rather proof of concept for the future research and development. 
                    </p>
                    <iframe class="projectImg projectVideo" src="https://www.youtube.com/embed/UApt6UGgiuA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <h2>References</h2>
                    <p>YoloV3 model training video:
                        https://www.youtube.com/watch?v=10joRJt39Ns
                    </p>
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#Machine Learning</div>
            </div>
            <div id="p3" class="project project3 box categoryIot">
                <div class="minimize"></div>
                IOT SCALE FOR WASTE BINS
                <div class="projectPage">
                    <p>Waste management companies sometimes bills their customers by the weight of the waste, also it is not legal to put over 60 kilos into the waste bins for safety reasons. It was decided to use IoT technology to inno-vate solutions for waste weight measurement and built a prototype for that. </p>
                    <p>Prototype for the scale was built that would measure the weight of the bin and send the data to the client. Four load cell sensors were used that handle 50 kg each so maximum weight allowed is 200 kg. Load cells were connected, using Wheatstone bridge, to a analog to digital converter (HX711) that converts pressure on the sensors to voltage calculated in the microchip. Microchip used was ESP8266 WLAN module based chip (ESP8266 NodeMCU). It analyses the information coming from the converter and also sends it to a website by connecting to the internet and Cloud services. All these task are programmed into a microchip using Arduino IDE software.</p>
                    <p><img class="projectImg" src="img/IoT-scale-wiring.png" width="70%" height="200px"></p>
                    <p>As a Cloud platform, Google Firebase is used. Firebase provides NoSQL real time database with website hosting, so data is updated almost instantly to the webpage where it is visualized and plotted into a graph. Data can be accessed with computer or mobile with internet connection. ESP8266 board is powered with rechargeable battery through micro USB port. It would be possible also to power them with basic mobile phone charger using AC, as some of the waste bin shelters have electricity for lights and such.</p>
                    <p><img class="projectImg" src="img/dataVisualisation.png" width="70%" height="200px"></p>
                    <p>Firebase Cloud services provide hosting only, so website still has to be built from the scratch. Website for the prototype (FIG 2.) was built using basic HTML, CSS and Javascript. Firebase is free to use to a point. If you would like to store more than 1 Gb of data per month it should pe updated to a paid version. </p>
                    <p>Working prototype was displayed and demonstrated in Savonia University’s IPD fair at the end of the course, where all groups showed their projects.</p>
                    <p><img class="projectImg" src="img/scale.jpg" width="70%" height="200px"></p>
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#IoT</div>
            </div>
            <div id="p4" class="project project4 box categoryMobile">
                <div class="minimize"></div>
                ANDROID DATASET RECORDER
                <div class="projectPage">
                    <p>To train accurate machine learning model a large variety of voice samples from different people is required. Each audio clip needs to be in separate “.wav”-file in the directory with corresponding command as directory name. Splitting words out of long audio files and categorizing them after recording is time consuming task.</p>
                    <p>Mobile application is developed to do the file classification at the same time with recording. With the app it is easy and fast to go around and ask people to say the commands. Dataset recording app is build for Android platform using Android Studio with Java. </p>
                    <p>Application functionality explained:</p>
                    <ol>
                        <li>
                            	Select a word 
                        </li>
                        <li>
                            	Press record 
                        </li>
                        <li>
                            	Say the word 
                        </li>
                        <li>
                            	Press stop 
                        </li>
                        <li>
                            	Audio is saved to [SD CARD root] / Audio / [word]. Audio files go to directory with corresponding word as name 
                        </li>
                        <li>
                            	You can play it back to see if its good, if not delete 
                        </li>
                        <li>
                            	When you want to transfer files from phone to PC press “zip and delete all” button. It makes zip file (PATH: [SD CARD root] / zippedAudio) with all recorded audio in right folders and deletes original audio files, so you can continue recording and there is no duplicates when you make zip file again. 
                        </li>
                        <li>
                            	Open Google Drive app on phone and add zip file there
                        </li>
                    </ol>
                    <img class="projectImg" src="img/datasetrecorder.jpg" width="200px" height="300px" >
                    <p>Source code for the app is available <a href="https://github.com/korpidigital/datasetRecorder">HERE</a></p>

                </div>
                <div class="emptySpace3"></div>
                <div class="hashTag">#Mobile Development</div>
            </div>
            <div id="p5" class="project project5 box categoryWeb">
                <div class="minimize"></div>
                MY WEBSITE
                <div class="projectPage">
                    <p>This website is for my projects, but it is itself a project worth mentioning. It is build with vanilla Javascript, HTML and CSS. Source code <a href="https://github.com/korpidigital/kopale.github.io">HERE</a> at Github.</p>
                </div>
                <div class="emptySpace1"></div>
                <div class="hashTag">#Web Development</div>
            </div> 
            <div id="p6" class="project poject6 box categoryMachine">
                <div class="minimize">               
                </div>
                AI VOICE COMMANDS
                <div class="projectPage">
                    <p><iframe class="projectImg projectVideo" src="https://www.youtube.com/embed/0DVFdk3BF_g" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </p>
                    <h1>1 Introduction</h1>
                    <p>&nbsp;</p>
                    <p>DeepSpeech is an open-source Speech-To-Text engine, it uses a model trained by machine learning techniques based on Baidu's Deep Speech research paper (<a href="https://arxiv.org/abs/1412.5567"><em>https://arxiv.org/abs/1412.5567</em></a>). Project DeepSpeech uses Google's TensorFlow to make the implementation easier. The documentation for installation, usage, and training models are available on <em>deepspeech.readthedocs.io</em></p>
                    <p>&nbsp;</p>
                    <p>This project aims to train a DeepSpeech model recognizing the following 16 Finnish commands: Anni, Annille, Manu, Manulle, Minna, Minnalle, moi, Olka, Onni, Otto, Otolle, tule t&auml;nne, netti, soita, kyll&auml;, ei.</p>
                    <p>&nbsp;</p>
                    <h1>2 Environment</h1>
                    <p>&nbsp;</p>
                    <p>The training is done in Ubuntu 18.04. operating system and a computer with CUDA enabled NVIDIA graphics card. The CUDA API allows the model training to be computed using GPU and makes the training roughly 100 times faster than using CPU. CUDA 10.1 installation tutorial for Ubuntu: (<a href="https://medium.com/@exesse/cuda-10-1-installation-on-ubuntu-18-04-lts-d04f89287130"><em>https://medium.com/@exesse/cuda-10-1-installation-on-ubuntu-18-04-lts-d04f89287130</em></a><em>). </em>Python 3.6 is used for running scripts.</p>
                    <p>&nbsp;</p>
                    <h1>3 Dataset</h1>
                    <p>&nbsp;</p>
                    <p>Dataset consists of audio WAV files of each command said by 3 different persons 10 times making the total recordings 480. Recording is done using Audacity. WAV files are augmented using Matlab audioDataAugmenter library. Augmentation shifts the pitch of every file randomly 12 times making a total recording count of 5760. Audio sample rate is 16kHz and audio format is ENCODING_PCM_16BIT mono channel audio. Matlab script &ldquo;<strong>augmentData.m</strong>&rdquo; is attached in the documentation.</p>
                    <p>&nbsp;</p>
                    <p>An Android application for dataset recording was made, but due to time constraints it was not optimized for this demo. The application uses the wrong words and records in the wrong sample rate, but it has potential to make dataset collection much quicker.</p>
                    <p>&nbsp;</p>
                    <p>Here is a link to the current dataset recorder application source code and explanation: https://github.com/korpidigital/datasetRecorder</p>
                    <p>&nbsp;</p>
                    <h1>4 Training</h1>
                    
                    <span class="pcPath">
                    <p>&nbsp;</p>
                    <p>The official DeepSpeech documentation advises to use a virtual environment for the training, but configuring it so that it would have all the necessary libraries had issues. After trying to list them in the PATH file with no response, it was decided not to use one. It did not prove to be an issue, a virtual environment is mostly useful for performance issues when multiple projects with different sets of libraries and dependencies are being developed on the same machine. Here are the steps listed from downloading dependencies, configuring files and folder architecture to running the training.</p>
                    <p>&nbsp;</p>
                    <ol>
                    <li>Download DeepSpeech repo (<a href="https://github.com/mozilla/DeepSpeech">https://github.com/mozilla/DeepSpeech</a>). This is the project folder, so the terminal is opened in this path and Linux commands (such as pip3 and python3) in the following steps are run there. For clarity, the terminal commands are coloured purple. In this example the path is <span class="pcPath">&lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/&gt;</em></span> </li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="2">
                    <li>pip3 install deepspeech-gpu</li>
                    </ol>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="pcPath">pip3 install --upgrade pip==20.2.4 wheel==0.34.2 setuptools==49.6.0</span></p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pip3 install --upgrade -e .</p>
                    <p>&nbsp;</p>
                    <ol start="3">
                    <li>Download &ldquo;kenlm&rdquo; language model interface by Kenneth Heafield (<a href="https://github.com/kpu/kenlm">https://github.com/kpu/kenlm</a>). Read BUILD file info and build it. Put build files in a folder named &ldquo;kenlm&rdquo; and add it to the project folder.</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="4">
                    <li>The project folder has a folder named &ldquo;training&rdquo; and in that there is a folder named &ldquo;deepspeech_training&rdquo;. Move &ldquo;deepspeech_training&rdquo; to the project folder. This makes the training script to have the right path to &ldquo;deepspeech_training&rdquo;.</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="5">
                    <li>Download files for scorer creation (<a href="https://github.com/mozilla/DeepSpeech/releases/download/v0.9.1/native_client.amd64.cuda.linux.tar.xz">https://github.com/mozilla/DeepSpeech/releases/download/v0.9.1/native_client.amd64.cuda.linux.tar.xz</a>) and put those files to path <span class="pcPath"> &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/&gt;</em></span></li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="6">
                    <li>At <span class="pcPath"> &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/&gt; </em></span>create an alphabet.txt file with each letter (and sign &ldquo;_&rdquo; used in &ldquo;tule_t&auml;nne&rdquo;) separated by line change and vocab.txt file with each command separated by space.</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="7">
                    <li>At <span class="pcPath"></span> &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/&gt;<br /> </em>python3 generate_lm.py --input_txt ./vocab.txt --output_dir . \<em><br /> </em>--top_k 16 --kenlm_bins /home/tuomas/Desktop/DeepSpeech-0.9.1/kenlm/bin \<br /> --arpa_order 3 --max_arpa_memory "85%" --arpa_prune "0|0|1" \<br /> --binary_a_bits 255 --binary_q_bits 8 --binary_type trie \<br /> --discount_fallback<br /> This generates a language model, it is used for the creation of the scorer. The scorer is composed of two sub-components, a KenLM language model and a trie data structure containing all words in the vocabulary. Scorer info: (<a href="https://deepspeech.readthedocs.io/en/latest/Scorer.html">https://deepspeech.readthedocs.io/en/latest/Scorer.html</a>).</li>
                    </ol>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <ol start="8">
                    <li>Make scorer file:<br /> At &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/&gt;<br /> </em>./generate_scorer_package --alphabet alphabet.txt --lm lm.binary --vocab vocab-16.txt \<br /> --package kenlm.scorer --default_alpha 0.931289039105002 --default_beta 1.1834137581510284<br /> --force_bytes_output_mode false</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="9">
                    <li>At &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1&gt; </em>make 5 new folders<br /> mkdir checkout<br /> mkdir model_export<br /> mkdir train<br /> mkdir dev<br /> mkdir test</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="10">
                    <li>Dataset is divided between &ldquo;train&rdquo;, &ldquo;dev&rdquo; and &ldquo;test&rdquo; folders (70%, 20%, 10%). CSV-files for training consists of &ldquo;wav_filename&rdquo; - path of the sample, &ldquo;wav_filesize&rdquo; - samples size given in bytes, &ldquo;transcript&rdquo; - transcription target for the sample. A python script &ldquo;<strong>py</strong>&rdquo; was created for CSV creation, but it requires data to be structured so that &ldquo;train&rdquo;, &ldquo;dev&rdquo; and &ldquo;test&rdquo; folders have a folder &ldquo;all&rdquo; and in that folder there are folders named by each command. So the dataset is divided and the same data is put in two places, for example: &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/train&gt; </em>and &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/train/all/annille&gt; </em>for training and for CSV creation.</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="11">
                    <li>At &lt;<em>/home/tuomas/Desktop/DeepSpeech-0.9.1/&gt;<br /> </em>python3 create_csv.py --target train<br /> python3 create_csv.py --target dev<br /> python3 create_csv.py --target test</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="12">
                    <li>Training the model:<br /> sudo python3 DeepSpeech.py --train_files /home/tuomas/Desktop/DeepSpeech-0.9.1/train/train.csv \<br /> --dev_files /home/tuomas/Desktop/DeepSpeech-0.9.1/dev/dev.csv \<br /> --test_files /home/tuomas/Desktop/DeepSpeech-0.9.1/test/test.csv \<br /> --train_batch_size 80 \<br /> --dev_batch_size 40 \<br /> --test_batch_size 40 \<br /> --n_hidden 376 \<br /> --epochs 55 \<br /> --learning_rate 0.00095 \<br /> --report_count 100 \<br /> --export_dir /home/tuomas/Desktop/DeepSpeech-0.9.1/model_export/ \<br /> --checkpoint_dir /home/tuomas/Desktop/DeepSpeech-0.9.1/checkout/ \<br /> --alphabet_config_path /home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/alphabet.txt \<br /> --use_allow_growth true \<br /> --dropout_rate 0.3 \<br /> --summary_dir /home/tuomas/Desktop/DeepSpeech-0.9.1/summary \<br /> --export_tflite \<br /> --cache_for_epochs 2 \<br /> --augment reverb[p=0.1,delay=50.0~30.0,decay=10.0:2.0~1.0] \<br /> --augment resample[p=0.1,rate=12000:8000~4000] \<br /> --augment codec[p=0.1,bitrate=48000:16000] \<br /> --augment volume[p=0.1,dbfs=-10:-40] \<br /> --augment tempo[p=0.1,factor=1~0.5] \<br /> --augment warp[p=0.1,nt=4,nf=1,wt=0.5:1.0,wf=0.1:0.2] \<br /> --augment frequency_mask[p=0.1,n=1:3,size=1:5] \<br /> --augment time_mask[p=0.1,domain=signal,n=3:10~2,size=50:100~40] \<br /> --augment dropout[p=0.1,rate=0.05] \<br /> --augment add[p=0.1,domain=signal,stddev=0~0.5] \<br /> --augment multiply[p=0.1,domain=features,stddev=0~0.5]</li>
                    </ol>
                    <p><br /> NOTE: The above command is for Android platform model. For Linux platform exclude the &ldquo;--export_tflite&rdquo; command. &ldquo;&mdash;augment&rdquo; commands are optional. Other parameters can be tweaked for slightly different outcomes. Batch size depends on GPU performance. Hidden layers are between 100 &ndash; 2400, but increasing the amount of layers slows the training. 50 epochs should be enough to achieve loss under one.</p>
                    <p>&nbsp;</p>
                    <ol start="13">
                    <li>Only for the Linux platform model. Convert PB file to PBMM file:<br /> python3 util/taskcluster.py --source tensorflow --artifact convert_graphdef_memmapped_format --branch r1.15 --target .<br /> <br /> ./convert_graphdef_memmapped_format --in_graph=./model_export/output_graph.pb --out_graph=./model_export/output_graph.pbmm</li>
                    </ol>
                    <p>&nbsp;</p>
                    <ol start="14">
                    <li>A produced model file (model.pbmm or model.tflite) and a scorer file (kenlm.scorer) that are used for speech recognition interface in Linux or Android platform are completed.</li>
                    </ol>
                    </span>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <h1>5 Android application</h1>
                    <p>&nbsp;</p>
                    <p>Android demo application builds upon the official DeepSpeech example &ldquo;android_mic_streaming&rdquo; (<a href="https://github.com/mozilla/DeepSpeech-examples">https://github.com/mozilla/DeepSpeech-examples</a>). Modified source code is attached with documentation. Code is opened with Android Studio IDE and it uses Kotlin as the coding language.</p>
                    <p>&nbsp;</p>
                    <p>When phone is paired with Android Studio, model and scorer files are copied to the phone&rsquo;s SD-card root folder through Android Studio terminal using the following command: <em>sudo adb -d push /home/tuomas/Desktop/DeepSpeech-0.9.1/model_export/output_graph.tflite /home/tuomas/Desktop/DeepSpeech-0.9.1/data/lm/kenlm_tflite.scorer /storage/emulated/0/Android/data/org.deepspeechdemo/files/</em></p>
                    <p>&nbsp;</p>
                    <p>Crucial modification to improve the recognition functionality is that a new recording stream is started after every prediction. Also functions for giving a name and storing it to the &ldquo;name.txt&rdquo; file and making a phone call are added.</p>
                    <p>&nbsp;</p>
                    <p>If no name is given (no name.txt file created) and command &ldquo;moi&rdquo; is detected, then the app responds with audio: &ldquo;Minulla ei ole nime&auml;. Olenko Olka vai Onni?&rdquo;. Then when it detects &ldquo;Olka&rdquo; or &ldquo;Onni&rdquo; the name is saved to the name.txt file and next time it detects the &ldquo;moi&rdquo; command it responds with: &ldquo;Nimeni on Onni/Olka&rdquo;.</p>
                    <p>&nbsp;</p>
                    <p>At the moment &ldquo;soita&rdquo; command has two phone numbers under two names. It makes a call to dedicated number if it detects &ldquo;soita&rdquo; and after that detects &ldquo;otolle&rdquo; or &ldquo;minnalle&rdquo;.</p>
                    <p>&nbsp;</p>
                    <p>Video for Android Application demo: <a href="https://www.youtube.com/watch?v=0DVFdk3BF_g&amp;feature=youtu.be&amp;ab_channel=TuomasKorpi">https://www.youtube.com/watch?v=0DVFdk3BF_g&amp;feature=youtu.be&amp;ab_channel=TuomasKorpi</a></p>
                    <p>&nbsp;</p>
                    <p>Video for Laptop demo: <a href="https://www.youtube.com/watch?v=BWyiBhLO1H0&amp;feature=youtu.be&amp;ab_channel=TuomasKorpi">https://www.youtube.com/watch?v=BWyiBhLO1H0&amp;feature=youtu.be&amp;ab_channel=TuomasKorpi</a> </p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <h1>&nbsp;</h1>
                    <h1>6 Results</h1>
                    <p>Attached with documentation the &ldquo;<strong>models</strong>&rdquo; folder includes models trained with different training parameters, which are listed in the folder name. Model version 5 is used in the Linux demo and it recognizes all of the 16 commands. Model version 10 is used in the Android app and it recognizes 11 commands, excluding the following: kyll&auml;, ei, tule t&auml;nne, netti. There were small differences when training with different parameters.</p>
                    <p>&nbsp;</p>
                    <p>The recognition is quite accurate, but it struggles with noisy environments. No apparent issues are present even when distance is increased to 5-10 meters (see video for proof). More training would certainly fix the issue with noisy environments, it has, so far, only been trained with the voices of 4 people, the more the better. For instance the commands &ldquo;onni&rdquo; and &ldquo;anni&rdquo; are very similar, so sometimes it mixes them.</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <h1>7 Conclusion and going forward</h1>
                    <p>In optimal conditions, meaning no background noise, the model performs quite well and is able to make right predictions and implement given functions based on them most of the time. If more speakers would contribute to dataset and background noise augmentation would be added, then the performance could improve greatly.</p>
                    <p>&nbsp;</p>
                    <p>It would be interesting to try to develop the model in a more general direction since there are some Finnish datasets available on the internet.</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#Machine Learning</div>   
            </div>
            <div id="p7" class="project project7 box categoryWeb categoryCustomer">
               
                <div class="minimize"></div>
                 CUSTOMER WEBSITE 1
                <div class="projectPage">
                <p>
                    Website for one man construction company. Done with HTML, CSS and Javascript: <a href=" https://rakennuspalvelupitkanen.github.io">https://rakennuspalvelupitkanen.github.io/</a>

                </p>
                <br>
                <br>
                <p>
                    <img class="projectImg projectVideo" src="img/website_review.gif" alt="">
                </p>
                
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#Web Dev</div>
            </div>
            <div id="p8" class="project project8 box categoryMobile categoryIot">
                <div class="minimize"></div>
                ANDROID IOT APP
                <div class="projectPage">
                    <h1>Idea</h1>
                    <p>
                        Project idea is to create temperature/humidity sensor network to my home and build an Android app to display the data. 
                        Main sensor station at home has a small screen where short messages can be send. 
                    </p>
                    <p>
                        <img class="projectImg projectVideo" src="img/androidAppIot.png" alt="">
                    </p>
                    <h1>Technology</h1>
                    <p>
                        <ul>
                            <li>
                                Programming: Android Studio Kotlin / Arduino IDE
                            </li>
                            <li>
                                Sensors: DHT22
                            </li>
                            <li>
                                Microcontrollers: ESP8266 NodeMCU
                            </li>
                            <li>
                                Database: Firebase Realtime NoSQL Database     
                            </li>
                        </ul>
                        
                        
                        
                       
                    </p>
                    <h1>Reference</h1>
                    <p>Source code at: <a href="https://github.com/korpidigital/homeSensors">GITHUB</a></p>
                    
                </div>
                <div class="emptySpace2"></div>
                <div class="hashTag">#Mobile Development #Iot</div>
            </div>
            
        </div>
    </div>
</div>

<div class="footer" id="footer">
    
    <div class="footerIcos"><a href="https://github.com/korpidigital"><img class="footerIco githubIco" width="100%" src="./icons/github.svg"></a></div>
    <div class="footerIcos"><a href="https://www.youtube.com/channel/UCuCUJh7piqa8mjF2yfNmmFg/videos"><img  class="footerIco youtubeIco"width="100%" src="./icons/youtubeIco.svg"></a></div>
    <div class="footerIcos"><a href="https://www.researchgate.net/profile/Tuomas_Korpi/research"><img  class="footerIco rgIco"width="100%" src="./icons/rg.svg"></a></div>

</div>
    
</div>
<script src="./main.js"></script>
</body>
